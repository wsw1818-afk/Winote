# AI 하이브리드 개발 워크플로우 (모델 간 협업 전용)

> 이 파일은 Claude Code + 다른 모델(GLM 등) 혼용 시에만 참조.
> 공통 규칙(출력 포맷/테스트/보안/에러 대응)은 `.claude/rules/`에 있음.
> v2.2 | 2026-02-14

---

## 1) 프로젝트 기억 파일 (핸드오프용)

| 파일 | 역할 | 변경 주기 |
|------|------|----------|
| `MEMORY.md` | 장기 맥락/결정/규칙 (팀 헌법) | 가끔 |
| `PROGRESS.md` | 당일 진행/다음 할 일 (작업 로그) | 매 세션 |

> 모델을 바꿔도 두 파일만 보면 바로 이어서 작업 가능해야 한다.

---

## 2) 핸드오프 프로토콜 (이 문장 그대로 사용)
- "PROGRESS.md와 MEMORY.md를 먼저 읽고, 지금 막힌 이슈 1개를 해결해줘."
- "내가 A 모델로 구현했으니, 너는 B 모델로 보안/성능 리뷰만 해줘."
- "코드 수정 후 PROGRESS.md를 업데이트하고 .commit_message.txt도 갱신해줘."

---

## 3) 역할 분담

### Claude (고성능 모델)
- 설계, 리팩터링, 보안/성능 리뷰, 복잡한 디버깅
- 구조적 결함, 보안 취약점, 설계 모순을 **비판적으로** 검토
- 변경 제안: "왜 위험한지 / 어떻게 고칠지 / 최소 diff" 3요소 포함

### GLM (가성비/구현 모델)
- 반복 구현(컴포넌트/CRUD/API), 로그 기반 빠른 수정 루프
- 속도보다 **정확성** 우선
- 수정 후 반드시 lint/typecheck 확인, 실패 시 재수정

### 공통
- 변경 후 반드시 PROGRESS.md에 기록

---

## 4) 갈등 해결 (Conflict Resolution)

두 모델 제안이 충돌할 때:
1. 사용자/제품 요구사항(acceptance) 충족 여부
2. 아키텍처/핵심 라이브러리는 Claude 설계 우선
3. GLM은 Claude 설계 범위 안에서 구현 최적화에 집중
4. 큰 변경(프레임워크 교체 등)은 반드시 질문 1회 후 진행

합의 안 되면 SUMMARY에 "충돌 요지 + 선택 이유" 2줄로 기록.

---

## 5) Context Check (정보 누락 방지)

- 작업 시작 전: PROGRESS.md 마지막 수정 내용 확인, 현재 목표 1문장 확인
- 예: "지금은 로그인 크래시(Open issue #2) 해결부터 진행합니다."

---

## 6) Error Linkage (난해한 버그 가속)

- GLM이 해결 못한 에러: 에러 원문/재현 스텝/환경 정보를 PROGRESS.md Open issues에 기록
- Claude: 원인 후보 2~3개 + 가장 가능성 높은 1개에 대한 검증 플랜 먼저 제시

---

## 7) Env Sandbox (환경 차이 방지)

환경 변수/빌드 도구 버전 변경 시:
- MEMORY.md의 Constraints 섹션 즉시 업데이트
- 문서에는 이름/버전만 기록 (값 금지)
